# Corvelloni Contabilidade
Static institutional website with calculators and a content hub. Deploy via GitHub Pages from `/docs`.

## Requirements
- Windows with PowerShell
- Node.js LTS ≥ 18 and npm ≥ 9

## Installation (Windows)
~~~powershell
winget install OpenJS.NodeJS.LTS
cd "C:\Users\SEU_USUARIO\Downloads\corvelloni contabilidade"
npm ci
~~~

## Scripts
~~~powershell
npm run dev       # local dev server
npm run build     # outputs production files to /docs
npm run preview   # preview production build at http://localhost:4173
npm run lint      # lint HTML, CSS, JS
npm run check     # lint + build
~~~

## GitHub Pages
- Settings → Pages → Source: Deploy from a branch.
- Branch: `main`. Folder: `/docs`.
- `.nojekyll` is included to prevent Jekyll processing.

## Important: The /docs folder

Important: The /docs Folder
The `/docs` folder contains the production version of the site, automatically generated by the `npm run build` command.

**NEVER** edit files inside this folder manually. Any changes will be permanently lost on the next build.
For any task involving code analysis, review, or modification, this folder must be completely ignored.
Work must focus exclusively on the projects source files (root HTML and content under `/assets`, `/calc`, `/duvidas`, `/ajuda`).


## Structure (high level)
- `/assets` CSS, JS, images, icons
- `/duvidas` searchable articles
- `/ajuda` help center
- `/calc` calculators
- `/docs` production build (GitHub Pages output)
~~~txt
/
├─ index.html
├─ ajuda/
├─ calc/
│  ├─ clt-vs-pj/
│  ├─ custo-abrir-cnpj/
│  ├─ fator-r/
│  ├─ impostos-pj/
│  ├─ rescisao/
│  └─ salario-liquido/
├─ duvidas/
│  ├─ index.html
│  ├─ como-abrir-empresa/
│  └─ como-funciona-simples/
├─ assets/ {css, js, img, icons}
├─ data/
├─ docs/
├─ site.webmanifest, robots.txt, sitemap.xml, 404.html
├─ vite.config.js
├─ .eslintrc.json, .stylelintrc.json, .htmlhintrc, .nojekyll, .gitignore, .gitattributes
├─ README.md
└─ AGENTS.md
~~~

## Troubleshooting

### Restore missing scripts (dev/build/lint/check)
Run once:
~~~powershell
npm pkg set scripts.dev="vite"
npm pkg set scripts.start="vite"
npm pkg set scripts.build="vite build"
npm pkg set scripts.preview="vite preview -s"
npm pkg set scripts['lint:css']="stylelint \"assets/css/**/*.css\" --allow-empty-input"
npm pkg set scripts['lint:js']="eslint \"assets/js/**/*.js\""
npm pkg set scripts['lint:html']="htmlhint \"**/*.html\""
npm pkg set scripts.lint="npm run lint:html && npm run lint:css && npm run lint:js"
npm pkg set scripts.check="npm run lint && npm run build"
~~~

### `npm run check` failing due to proxy or script
~~~powershell
npm config delete http-proxy
npm config delete https-proxy
npm pkg set scripts.check="npm run lint && npm run build"
npm run check
~~~

### `xdg-open ENOENT` on `npm run preview`
- Cause: headless environment without GUI opener.
- Quick fix: ignore the error and open the shown URL (e.g., `http://localhost:4173`) manually.
- Permanent fix: remove auto-open.
~~~json
"preview": "vite preview -s"
~~~

## Language and commits policy
- All **user-facing output must be in Brazilian Portuguese (PT-BR)**: error messages, PR descriptions, code comments, UI copy, and agent replies.
- Commits follow **Conventional Commits**. Types in English (`feat`, `fix`, etc.). **Titles and bodies in PT-BR**.
- Logs/commands may remain in English. Summaries and explanations end in **PT-BR**.

### Examples
- Commit: `feat: adiciona página "Como funciona" e links no header`
- PR title: `Corrige dropdown do menu no mobile`
- PR body: `Resumo, mudanças e como testar em PT-BR.`
